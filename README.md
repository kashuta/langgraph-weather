# ü§ñ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è LangGraph: –°—É–ø–µ—Ä–≤–∏–∑–æ—Ä –∏ –ê–≥–µ–Ω—Ç—ã-–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç ‚Äî —É—á–µ–±–Ω–æ–µ –ø–æ—Å–æ–±–∏–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã **LangGraph**, —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö, –º–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω—ã—Ö —Å–∏—Å—Ç–µ–º. –í —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã **–¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–∞** –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∞–≥–µ–Ω—Ç–∞–º–∏, —á—Ç–æ–±—ã —Å—Ç—É–¥–µ–Ω—Ç—ã –º–æ–≥–ª–∏ —Å—Ä–∞–≤–Ω–∏—Ç—å –∏—Ö –≤ –¥–µ–π—Å—Ç–≤–∏–∏.

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞–º, –∫–∞–∫:
1.  **–°–æ–∑–¥–∞–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ AI-–∞–≥–µ–Ω—Ç—ã** –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á.
2.  **–û—Ä–∫–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Ö —Ä–∞–±–æ—Ç—É** —Å –ø–æ–º–æ—â—å—é –¥–≤—É—Ö —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ "—Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä–æ–≤": —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞.
3.  **–°—Ç—Ä–æ–∏—Ç—å –∏ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ—ã** –≤ LangGraph –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–º –¥–∞–Ω–Ω—ã—Ö.
4.  **–ù–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–º –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### 1. –ê–≥–µ–Ω—Ç—ã-–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã
- **`WeatherAgent`**: –ó–Ω–∞–µ—Ç –≤—Å—ë –æ –ø–æ–≥–æ–¥–µ. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `get_weather`.
- **`GeographyAgent`**: –≠–∫—Å–ø–µ—Ä—Ç –ø–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –¥–µ–º–æ–≥—Ä–∞—Ñ–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `get_coordinates`, `get_population`, `get_traffic_info`.

### 2. –î–≤–∞ —Ç–∏–ø–∞ –°—É–ø–µ—Ä–≤–∏–∑–æ—Ä–æ–≤

–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–≤–∞ —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä–∞, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1.  **–†–µ–∞–∫—Ç–∏–≤–Ω—ã–π –°—É–ø–µ—Ä–≤–∏–∑–æ—Ä (`supervisor.js`):** "–ú–æ–∑–≥", –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –ø–æ—à–∞–≥–æ–≤–æ. –û–Ω –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞ –∏ —Ä–µ—à–∞–µ—Ç, –∫–∞–∫–æ–º—É —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É **—Å–ª–µ–¥—É—é—â–∏–º** –ø–æ—Ä—É—á–∏—Ç—å –∑–∞–ø—Ä–æ—Å.
2.  **–°—É–ø–µ—Ä–≤–∏–∑–æ—Ä-–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (`planner_supervisor.js`):** "–°—Ç—Ä–∞—Ç–µ–≥", –∫–æ—Ç–æ—Ä—ã–π —Å–Ω–∞—á–∞–ª–∞ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ä—É–µ—Ç —Å–ª–æ–∂–Ω—É—é –∑–∞–¥–∞—á—É –Ω–∞ **–ø–æ–ª–Ω—ã–π –ø–ª–∞–Ω**, –∞ –∑–∞—Ç–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–∞–∂–¥—ã–π —à–∞–≥ —ç—Ç–æ–≥–æ –ø–ª–∞–Ω–∞.

---

## üß† –ü–æ–¥—Ö–æ–¥ 1: –†–µ–∞–∫—Ç–∏–≤–Ω—ã–π –¶–∏–∫–ª (Reactive Loop)

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–≥–æ —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ.

### –î–∏–∞–≥—Ä–∞–º–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```mermaid
graph TD;
    subgraph "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
        A[–í–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    end

    subgraph "–°–∏—Å—Ç–µ–º–∞ LangGraph"
        B(Supervisor) -- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è --> C{WeatherAgent};
        B -- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è --> D{GeographyAgent};
        C -- –û—Ç–≤–µ—Ç --> B;
        D -- –û—Ç–≤–µ—Ç --> B;
    end

    subgraph "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã"
        C -- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç --> E[get_weather];
        D -- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç --> F[get_population];
        D -- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç --> G[get_coordinates];
        D -- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç --> H[get_traffic_info];
    end
    
    A --> B;
    B -- –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç --> I[–í—ã–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é];
```

### –î–∏–∞–≥—Ä–∞–º–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ (–¶–∏–∫–ª –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π)

```mermaid
sequenceDiagram
    participant User
    participant Supervisor
    participant Agent
    
    User->>Supervisor: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å
    loop –¶–∏–∫–ª –¥–æ FINISH
        Supervisor->>Supervisor: –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
        Supervisor->>Agent: –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞
        Agent->>Agent: –í—ã–∑–æ–≤ —Å–≤–æ–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
        Agent-->>Supervisor: –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    end
    Supervisor-->>User: –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
```

-   **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** –í—ã—Å–æ–∫–∞—è –≥–∏–±–∫–æ—Å—Ç—å, –ø—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
-   **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:** –ú–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∞—Ç—å –ª–∏—à–Ω–∏–µ —à–∞–≥–∏, —Ç–∞–∫ –∫–∞–∫ –Ω–µ –≤–∏–¥–∏—Ç –ø–æ–ª–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω—ã —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞.

---

## üèõÔ∏è –ü–æ–¥—Ö–æ–¥ 2: –ü–ª–∞–Ω –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è (Execution Plan)

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä–∞-–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞–Ω, –∞ –ø–æ—Ç–æ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç –µ–≥–æ.

### –î–∏–∞–≥—Ä–∞–º–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```mermaid
graph TD;
    subgraph "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
        A[–í–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    end

    subgraph "–°–∏—Å—Ç–µ–º–∞ LangGraph"
        B(Planner) -- –°–æ–∑–¥–∞–µ—Ç –ø–ª–∞–Ω --> C[–ü–ª–∞–Ω: –®–∞–≥ 1, –®–∞–≥ 2, ...]
        C -- –ü–µ—Ä–µ–¥–∞–µ—Ç —à–∞–≥–∏ --> D(Executor)
        D -- –í—ã–∑—ã–≤–∞–µ—Ç –∞–≥–µ–Ω—Ç–∞ --> E{Agent}
        E -- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç --> D
        D -- –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –¥–æ –∫–æ–Ω—Ü–∞ –ø–ª–∞–Ω–∞ --> C
        D -- –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–ª–∞–Ω–∞ --> F(Responder)
    end

    subgraph "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã"
        E -- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç --> G[Tools]
    end
    
    A --> B;
    F -- –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç --> H[–í—ã–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é];
```

### –î–∏–∞–≥—Ä–∞–º–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞

```mermaid
sequenceDiagram
    participant User
    participant Planner
    participant Executor
    participant Agent
    participant Responder

    User->>Planner: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ª–æ–∂–Ω—ã–π –∑–∞–ø—Ä–æ—Å
    Planner->>Planner: –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∑–∞–¥–∞—á–∏ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞
    
    loop –î–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –≤ –ø–ª–∞–Ω–µ
        Planner->>Executor: –ü–µ—Ä–µ–¥–∞—á–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞
        Executor->>Agent: –í—ã–∑–æ–≤ –Ω—É–∂–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ —Å –ø–æ–¥-–∑–∞–¥–∞—á–µ–π
        Agent->>Agent: –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
        Agent-->>Executor: –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    end
    
    Executor->>Responder: –ü–µ—Ä–µ–¥–∞—á–∞ –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    Responder->>Responder: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –æ–¥–∏–Ω –æ—Ç–≤–µ—Ç
    Responder-->>User: –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
```

-   **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** –ë–æ–ª–µ–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –º–µ–Ω—å—à–µ –ª–∏—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤ LLM.
-   **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:** –ú–µ–Ω–µ–µ –≥–∏–±–∫–∏–π, –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ —à–∞–≥–æ–≤ –ø—Ä–æ–≤–∞–ª–∏—Ç—Å—è. –¢—Ä–µ–±—É–µ—Ç –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∏–Ω–≥–∞ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ agents/
‚îÇ   ‚îú‚îÄ‚îÄ geography.js
‚îÇ   ‚îî‚îÄ‚îÄ weather.js
‚îú‚îÄ‚îÄ graph/
‚îÇ   ‚îú‚îÄ‚îÄ supervisor.js          # –ü–æ–¥—Ö–æ–¥ 1: –†–µ–∞–∫—Ç–∏–≤–Ω—ã–π —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ planner_supervisor.js  # –ü–æ–¥—Ö–æ–¥ 2: –°—É–ø–µ—Ä–≤–∏–∑–æ—Ä-–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
‚îú‚îÄ‚îÄ tools/
‚îÇ   ‚îú‚îÄ‚îÄ ... (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
‚îú‚îÄ‚îÄ console.js
‚îî‚îÄ‚îÄ main.js
.env
package.json
README.md
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    npm install
    ```

2.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á–∏:**
    - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`.
    - –í—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–π `OPENAI_API_KEY`.
    - –î–æ–±–∞–≤—å—Ç–µ `WEATHERAPI_COM_KEY` —Å–æ —Å–≤–æ–∏–º –∫–ª—é—á–æ–º –æ—Ç [WeatherAPI.com](https://www.weatherapi.com/) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ.

3.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
    ```bash
    npm start
    ```
    –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤–∞–º –±—É–¥–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –≤—ã–±—Ä–∞—Ç—å, –∫–∞–∫–æ–≥–æ —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
    - **1: –†–µ–∞–∫—Ç–∏–≤–Ω—ã–π**
    - **2: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫**

    –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –≤—ã —Å–º–æ–∂–µ—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –≤ –∫–æ–Ω—Å–æ–ª—å. –î–ª—è –≤—ã—Ö–æ–¥–∞ –≤–≤–µ–¥–∏—Ç–µ `exit`.
